{% extends "base.html" %}

{% block content %}
<h2>User Dashboard</h2>
<p>Welcome, {{ current_user.username }}! Access and update your health data here.</p>

<form method="POST" action="{{ url_for('user_access_data') }}">
    <div class="mb-3">
        <label for="user_id" class="form-label">ID</label>
        <input type="text" name="user_id" id="user_id" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="first_name" class="form-label">First Name</label>
        <input type="text" name="first_name" id="first_name" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="last_name" class="form-label">Last Name</label>
        <input type="text" name="last_name" id="last_name" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-primary">Access Data</button>
</form>

{% if patient_data %}
    <form method="POST" action="{{ url_for('user_update_data', id=patient_data.id) }}">
        <h3>Edit Your Health Data</h3>
        <div class="mb-3">
            <label for="first_name" class="form-label">First Name</label>
            <input type="text" name="first_name" id="first_name" class="form-control" value="{{ patient_data.first_name }}" required>
        </div>
        <div class="mb-3">
            <label for="last_name" class="form-label">Last Name</label>
            <input type="text" name="last_name" id="last_name" class="form-control" value="{{ patient_data.last_name }}" required>
        </div>
                
        <div class="mb-3">
            <label for="age" class="form-label">Age</label>
            <input type="number" name="age" id="age" class="form-control" value="{{ patient_data.age }}" required>
        </div>
        
        <div class="mb-3">
            <label for="gender" class="form-label">Gender</label>
            <input type="text" name="gender" id="gender" class="form-control" value="{{ patient_data.gender }}" required>
        </div>
        
        <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <input type="text" name="location" id="location" class="form-control" value="{{ patient_data.location }}" required>
        </div>
        
        <div class="mb-3">
            <label for="date_recorded" class="form-label">Date Recorded</label>
            <input type="date" name="date_recorded" id="date_recorded" class="form-control" value="{{ patient_data.date_recorded }}" required>
        </div>
    
        <div class="mb-3">
            <label for="weight_kg" class="form-label">Weight (kg)</label>
            <input type="number" step="0.1" name="weight_kg" id="weight_kg" class="form-control" value="{{ patient_data.weight_kg }}" required>
        </div>
    
        <div class="mb-3">
            <label for="height_cm" class="form-label">Height (cm)</label>
            <input type="number" step="0.1" name="height_cm" id="height_cm" class="form-control" value="{{ patient_data.height_cm }}" required>
        </div>
    
        <div class="mb-3">
            <label for="bmi" class="form-label">BMI</label>
            <input type="number" step="0.1" name="bmi" id="bmi" class="form-control" value="{{ patient_data.bmi }}" required>
        </div>
    
        <div class="mb-3">
            <label for="heart_rate_bpm" class="form-label">Heart Rate (bpm)</label>
            <input type="number" name="heart_rate_bpm" id="heart_rate_bpm" class="form-control" value="{{ patient_data.heart_rate_bpm }}" required>
        </div>
    
        <div class="mb-3">
            <label for="bp_systolic" class="form-label">BP Systolic</label>
            <input type="number" name="bp_systolic" id="bp_systolic" class="form-control" value="{{ patient_data.bp_systolic }}" required>
        </div>
    
        <div class="mb-3">
            <label for="bp_diastolic" class="form-label">BP Diastolic</label>
            <input type="number" name="bp_diastolic" id="bp_diastolic" class="form-control" value="{{ patient_data.bp_diastolic }}" required>
        </div>
    
        <div class="mb-3">
            <label for="steps_count" class="form-label">Steps Count</label>
            <input type="number" name="steps_count" id="steps_count" class="form-control" value="{{ patient_data.steps_count }}" required>
        </div>
    
        <div class="mb-3">
            <label for="calories_burned" class="form-label">Calories Burned</label>
            <input type="number" step="0.1" name="calories_burned" id="calories_burned" class="form-control" value="{{ patient_data.calories_burned }}" required>
        </div>
    
        <div class="mb-3">
            <label for="sleep_duration_hours" class="form-label">Sleep Duration (hours)</label>
            <input type="number" step="0.1" name="sleep_duration_hours" id="sleep_duration_hours" class="form-control" value="{{ patient_data.sleep_duration_hours }}" required>
        </div>
    
        <div class="mb-3">
            <label for="sleep_quality" class="form-label">Sleep Quality</label>
            <input type="text" name="sleep_quality" id="sleep_quality" class="form-control" value="{{ patient_data.sleep_quality }}" required>
        </div>
    
        <div class="mb-3">
            <label for="mood" class="form-label">Mood</label>
            <input type="text" name="mood" id="mood" class="form-control" value="{{ patient_data.mood }}" required>
        </div>
    
        <div class="mb-3">
            <label for="stress_level" class="form-label">Stress Level</label>
            <input type="text" name="stress_level" id="stress_level" class="form-control" value="{{ patient_data.stress_level }}" required>
        </div>
    
        <div class="mb-3">
            <label for="water_intake_liters" class="form-label">Water Intake (liters)</label>
            <input type="number" step="0.1" name="water_intake_liters" id="water_intake_liters" class="form-control" value="{{ patient_data.water_intake_liters }}" required>
        </div>

        <button type="submit" class="btn btn-success">Update Data</button>
    </form>
{% elif patient_data is not none %}
    <p>Data not found for the provided information.</p>
{% endif %}

{% endblock %}
